{"ast":null,"code":"var _jsxFileName = \"/Users/daana/Projects/a_toxic/client/src/pages/Auth.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Button, Card, Container, Form } from \"react-bootstrap\";\nimport { NavLink, useHistory, useLocation } from \"react-router-dom\";\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from \"../utils/consts\";\nimport { Context } from \"../index\";\nimport { login, registration } from \"../http/user_api\";\nimport { observer } from \"mobx-react-lite\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Auth = observer(_c = _s(() => {\n  _s();\n\n  const location = useLocation();\n  const isLogin = location.pathname === LOGIN_ROUTE;\n  const history = useHistory();\n  const {\n    user\n  } = useContext(Context);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [username, setUsername] = useState('');\n  const [file, setFile] = useState(null);\n\n  const selectFile = e => {\n    setFile(e.target.files[0]);\n  };\n\n  const click = async () => {\n    try {\n      let data;\n\n      if (isLogin) {\n        data = await login(email, password);\n        console.log(data);\n      } else {\n        console.log(email, username, password);\n        data = await registration(email, username, password);\n      }\n\n      console.log(data);\n\n      if (data) {\n        user.setIsAuth(true);\n        user.setUser(data);\n        history.push(MAIN_ROUTE);\n      }\n    } catch (e) {\n      history.push(LOGIN_ROUTE);\n      return alert(e.response.data.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"d-flex justify-content-center align-items-center \",\n    style: {\n      height: window.innerHeight - 100\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"p-2 auth_card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"m-auto pb-4\",\n        children: isLogin ? 'Вход' : 'Регистрация'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3 input_style\",\n          placeholder: \"\\u041F\\u043E\\u0447\\u0442\\u0430\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), isLogin ? \"\" : /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3 input_style\",\n          placeholder: \"\\u0418\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",\n          value: username,\n          onChange: e => setUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), isLogin ? \"\" : /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3 input_style\",\n          placeholder: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0444\\u0430\\u0439\\u043B\",\n          type: \"file\",\n          onChange: selectFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          type: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: click,\n          className: \"mt-3\",\n          children: isLogin ? 'Войти' : 'Зарегистрироваться'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), isLogin ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center mt-2 small-text\",\n          children: [\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \", /*#__PURE__*/_jsxDEV(NavLink, {\n            to: REGISTRATION_ROUTE,\n            children: \" \\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 102\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center mt-2 small-text\",\n          children: [\"\\u0423\\u0436\\u0435 \\u0435\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \", /*#__PURE__*/_jsxDEV(NavLink, {\n            to: LOGIN_ROUTE,\n            children: \" \\u0412\\u043E\\u0439\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 106\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}, \"WfGCYAlX/knBSqdZVGYI6RC0Fbk=\", false, function () {\n  return [useLocation, useHistory];\n}));\n_c2 = Auth;\nexport default Auth;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Auth$observer\");\n$RefreshReg$(_c2, \"Auth\");","map":{"version":3,"sources":["/Users/daana/Projects/a_toxic/client/src/pages/Auth.js"],"names":["React","useContext","useEffect","useState","Button","Card","Container","Form","NavLink","useHistory","useLocation","LOGIN_ROUTE","MAIN_ROUTE","REGISTRATION_ROUTE","Context","login","registration","observer","Auth","location","isLogin","pathname","history","user","email","setEmail","password","setPassword","username","setUsername","file","setFile","selectFile","e","target","files","click","data","console","log","setIsAuth","setUser","push","alert","response","message","height","window","innerHeight","value"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {Button, Card, Container, Form} from \"react-bootstrap\";\nimport {NavLink, useHistory, useLocation} from \"react-router-dom\";\nimport {LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE} from \"../utils/consts\";\nimport {Context} from \"../index\";\nimport {login, registration} from \"../http/user_api\";\nimport {observer} from \"mobx-react-lite\";\n\nconst Auth = observer(() => {\n    const location = useLocation()\n    const isLogin = location.pathname === LOGIN_ROUTE\n    const history = useHistory()\n    const {user} = useContext(Context)\n\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [username, setUsername] = useState('')\n    const [file, setFile] = useState(null)\n\n    const selectFile = e => {\n        setFile(e.target.files[0])\n    }\n    const click = async () => {\n        try {\n            let data;\n            if (isLogin) {\n                data = await login(email, password);\n                console.log(data)\n\n            } else {\n                console.log(email, username,  password)\n                data = await registration(email, username, password);\n            }\n            console.log(data)\n            if(data) {\n                user.setIsAuth(true)\n                user.setUser(data)\n                history.push(MAIN_ROUTE)\n            }\n        } catch (e) {\n            history.push(LOGIN_ROUTE)\n            return alert(e.response.data.message)\n        }\n\n    }\n    return (\n        <Container\n            className=\"d-flex justify-content-center align-items-center \"\n            style={{height: window.innerHeight-100}}\n        >\n            <Card className=\"p-2 auth_card\">\n                <h2 className=\"m-auto pb-4\">{isLogin? 'Вход' : 'Регистрация'}</h2>\n                <Form className=\"d-flex flex-column\">\n                    <Form.Control\n                        className=\"mt-3 input_style\"\n                        placeholder=\"Почта\"\n                        value={email}\n                        onChange={e => setEmail(e.target.value)}\n                    />\n                    {isLogin ? \"\" :\n\n                        <Form.Control\n                            className=\"mt-3 input_style\"\n                            placeholder=\"Имя пользователя\"\n                            value={username}\n                            onChange={e => setUsername(e.target.value)}\n                        />\n                    }\n                    {isLogin ? \"\" :\n\n                        <Form.Control\n                            className=\"mt-3 input_style\"\n                            placeholder=\"Выберите файл\"\n                            type=\"file\"\n                            \n                            onChange={selectFile}\n                        />\n                    }\n                    <Form.Control\n                        className=\"mt-3\"\n                        placeholder=\"Пароль\"\n                        value={password}\n                        onChange={e => setPassword(e.target.value)}\n                        type=\"password\"\n                    />\n                    <Button onClick={click} className=\"mt-3\">{isLogin? 'Войти': 'Зарегистрироваться'}</Button>\n                    {isLogin ?\n                        <div className=\"d-flex justify-content-center mt-2 small-text\">Нет аккаунта? <NavLink to={REGISTRATION_ROUTE}> Зарегистрироваться</NavLink></div>\n                        :\n                        <div className=\"d-flex justify-content-center mt-2 small-text\">Уже есть аккаунт? <NavLink to={LOGIN_ROUTE}> Войти</NavLink></div>\n                    }\n                </Form>\n            </Card>\n        </Container>\n    );\n});\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}